# CookTracker - 料理管理アプリ

## 🍳 アプリ概要

CookTrackerは、料理初心者の自炊継続をゲーミフィケーション要素でサポートするiOSアプリです。レシピ管理、調理タイマー、経験値システム、バッジ獲得など、料理を楽しく続けられる機能を提供します。

## 📱 主要機能

### ✅ 実装済み機能

#### 🏠 ホーム画面 (SimpleHomeView)
- **ユーザー情報表示**: 現在のレベル・経験値・次レベルまでの進捗
- **今日の調理提案**: おすすめレシピの表示
- **調理セッション管理**: アクティブな調理の状態表示と操作
- **補助タイマー統合**: コンパクトな補助タイマー表示と操作
- **最近の調理履歴**: 直近3件の調理記録表示
- **クイックアクション**: レシピ追加・補助タイマー・レシピ一覧への素早いアクセス

#### 📚 レシピ管理 (RecipeListView)
- **完全なCRUD操作**:
  - ✅ レシピ作成（手動入力・URL対応）
  - ✅ レシピ一覧表示（カテゴリ別・検索機能）
  - ✅ レシピ詳細表示
  - ✅ レシピ編集（インライン編集ボタン付き）
  - ✅ レシピ削除（スワイプ削除）
- **検索・フィルター機能**: タイトル・材料での部分一致検索
- **カテゴリ分類**: 食事・デザート・おつまみ
- **難易度・調理時間表示**: 星5段階評価と予想時間

#### ⏱️ 調理セッション管理
- **CookingSessionView**: メイン調理タイマー画面
  - カウントアップタイマー（一時停止・再開・完了）
  - レシピ情報表示
  - 補助タイマーアクセス
  - 調理キャンセル機能
- **CookingTimerView**: 補助タイマー画面
  - カウントダウンタイマー
  - バックグラウンド動作対応
  - 通知機能
  - 複数タイマー管理準備

#### 📸 調理完了記録 (CookingCompletionView)
- **写真撮影・選択機能**:
  - カメラでの撮影
  - フォトライブラリからの選択
  - 最大20枚の写真保存
  - 写真削除機能
- **改善メモ入力**: 次回調理への改善点記録
- **経験値獲得表示**: 獲得経験値とレベル情報
- **レベルアップアニメーション**: リッチなUI演出

#### 🎮 ゲーミフィケーション システム
- **経験値・レベルシステム**:
  - 調理完了で15XP獲得
  - レベル計算式: `level^2 * 100`
  - リアルタイム進捗表示
  - レベルアップアニメーション

- **バッジシステム（8種類）**:
  - 🥇 **初回調理バッジ**: 初めて料理完了
  - 🔥 **連続調理バッジ**: 連続日数調理（3日・7日・30日）
  - ⚡ **スピード調理バッジ**: 予想時間以下で完了
  - 📷 **写真マスターバッジ**: 写真付き調理記録
  - 📝 **メモマスターバッジ**: メモ付き調理記録
  - 🏆 **料理マスターバッジ**: 累計調理回数（10回・50回・100回）
  - ⭐ **チャレンジャーバッジ**: 難易度4以上のレシピ完了
  - 🍳 **熟練者バッジ**: 同一レシピ3回調理

#### 📊 履歴・統計画面 (HistoryStatsView)
- **3つのタブ構成**:
  - **履歴タブ**: 月間カレンダー表示での調理記録
  - **統計タブ**: 調理回数・平均時間・経験値統計
  - **バッジタブ**: 獲得バッジ一覧とレア度表示

#### 💾 Core Data統合
- **4つのメインエンティティ**:
  - `User`: ユーザー情報（レベル・経験値）
  - `Recipe`: レシピ情報（タイトル・材料・手順・難易度）
  - `CookingRecord`: 調理記録（時間・写真・メモ・獲得経験値）
  - `Badge`: バッジ情報（種類・取得日時）
- **エンティティ関係性**: User ↔ Badge, User ↔ CookingRecord, Recipe ↔ CookingRecord
- **自動マイグレーション対応**

## 🏗️ アーキテクチャ

### プロジェクト構成
```
CookTracker/
├── CookTrackerApp.swift          # メインアプリエントリーポイント
├── Persistence.swift             # Core Data設定・サンプルデータ
├── CookTrackerDataModel.xcdatamodeld/ # Core Dataモデル定義
├── Models/
│   ├── User+Extensions.swift     # ユーザーエンティティ拡張
│   ├── BadgeSystem.swift         # バッジシステム管理
│   ├── CookingSessionTimer.swift # 調理セッションタイマー
│   └── CookingTimer.swift        # 補助タイマー
└── Views/
    ├── ContentView.swift         # メインタブビュー
    ├── SimpleHomeView.swift      # ホーム画面
    ├── RecipeListView.swift      # レシピ一覧・管理
    ├── CookingSessionView.swift  # 調理セッション画面
    ├── CookingCompletionView.swift # 調理完了記録
    ├── CookingTimerView.swift    # 補助タイマー画面
    ├── HistoryStatsView.swift    # 履歴・統計画面
    └── AddRecipeFormView.swift   # レシピ追加フォーム
```

### 技術スタック
- **フレームワーク**: SwiftUI, Core Data
- **対象OS**: iOS 15.0+
- **言語**: Swift
- **アーキテクチャパターン**: MVVM with ObservableObject
- **データ永続化**: Core Data (ローカル)

### Core Data設計
```swift
// User Entity
- id: UUID
- level: Int32
- experiencePoints: Int32
- createdAt: Date
- updatedAt: Date

// Recipe Entity  
- id: UUID
- title: String
- ingredients: String
- instructions: String?
- category: String
- difficulty: Int32 (1-5)
- estimatedTimeInMinutes: Int32
- url: String?
- createdAt: Date
- updatedAt: Date

// CookingRecord Entity
- id: UUID
- recipeId: UUID
- cookingTimeInMinutes: Int32
- photoPaths: NSObject? (Array of String)
- notes: String?
- experienceGained: Int32
- cookedAt: Date

// Badge Entity
- id: UUID
- badgeType: String
- earnedAt: Date
```

## 🚀 ビルド・実行方法

### 必要環境
- Xcode 14.0以上
- iOS 15.0以上のSimulator/実機
- Swift 5.7以上

### ビルド手順
```bash
# プロジェクトを開く
open CookTracker.xcodeproj

# iOS Simulatorでビルド・実行
# Xcode内で Product > Run (⌘R)

# クリーンビルド（必要に応じて）
# Product > Clean Build Folder (⌘⇧K)
```

### 初回起動時の動作
1. Core Dataデータベースの初期化
2. デフォルトユーザーの作成（レベル1、経験値0）
3. サンプルレシピの作成（3件）

## 🎯 使用方法

### 基本的なワークフロー
1. **レシピ追加**: レシピタブでレシピを追加
2. **調理開始**: ホーム画面またはレシピ詳細から調理セッション開始
3. **調理完了**: タイマー終了後、写真撮影・メモ入力
4. **経験値獲得**: 自動的に経験値付与・レベルアップ判定
5. **バッジ獲得**: 条件達成でバッジ自動付与
6. **履歴確認**: 履歴タブで過去の調理記録確認

### 主要な操作方法
- **レシピ編集**: レシピ行の編集ボタンをタップ
- **レシピ削除**: レシピ行を左スワイプ
- **調理一時停止**: 調理セッション中の一時停止ボタン
- **補助タイマー**: ホーム画面のコンパクト表示から操作
- **写真追加**: 調理完了時にカメラまたはフォトライブラリから選択

## 📈 実装された仕様詳細

### ゲーミフィケーション仕様
- **経験値計算**: 調理完了時一律15XP
- **レベル計算**: `level = floor(sqrt(totalXP / 100)) + 1`
- **バッジ判定**: 調理完了時に自動チェック・付与

### UI/UX特徴
- **ブラウンカラーテーマ**: 温かみのある料理系デザイン
- **リッチアニメーション**: レベルアップ・バッジ獲得時の演出
- **レスポンシブ設計**: 様々な画面サイズに対応
- **直感的操作**: スワイプ・タップでの簡単操作

### パフォーマンス対応
- **@FetchRequest**: Core Dataからのリアルタイムデータ取得
- **遅延読み込み**: 大量データに対する効率的表示
- **バックグラウンド対応**: タイマーの継続動作

## 🔄 今後の実装予定

### フェーズ2機能
- [ ] 複数補助タイマー同時実行
- [ ] レシピURL自動取得（タイトル・サムネイル）
- [ ] ソーシャル機能（レシピ共有）
- [ ] 栄養情報表示
- [ ] 買い物リスト機能
- [ ] 音声・バイブレーション演出強化

### 技術的改善
- [ ] Supabase連携（クラウド同期）
- [ ] 写真の実際のファイル保存実装
- [ ] アプリ内通知の拡張
- [ ] アクセシビリティ対応強化
- [ ] 多言語対応（Localizable.strings）

## 🐛 既知の課題

### 実装簡略化箇所
1. **写真保存**: 現在はパス文字列のみ保存（実際の画像ファイル保存は未実装）
2. **URL自動取得**: レシピURLのタイトル・サムネイル自動取得は未実装
3. **複数タイマー**: 補助タイマーは1つのみ（複数同時実行は将来実装）

### パフォーマンス改善余地
- 大量の調理記録データでの表示最適化
- 写真データの圧縮・リサイズ処理
- Core Dataクエリの最適化

## 📄 ライセンス

このプロジェクトは開発学習目的で作成されています。

## 🤝 貢献

Claude Code (claude.ai/code) によるペアプログラミングで開発されました。

---

**最終更新**: 2025年6月15日  
**バージョン**: 1.0.0 (完全版)  
**開発者**: Claude & User  
**開発期間**: 2025年6月13日〜15日