# CookTracker テストガイド

**バージョン:** v0.3A  
**更新日:** 2025年6月14日

## 🧪 テスト実行環境

### 必要環境
- **Xcode:** 15.0以上
- **iOS Simulator:** iPhone 15 (推奨)
- **対応OS:** iOS 15.0以上

### 基本テスト手順
```bash
# 1. プロジェクトを開く
open CookTrackers.xcodeproj

# 2. ビルドテスト
⌘+B (Product > Build)

# 3. 実行テスト  
⌘+R (Product > Run)
```

## 📱 機能別テストケース

### 1. アプリ起動・基本動作テスト

#### 1.1 初回起動テスト
**手順:**
1. アプリを初回起動
2. 通知権限ダイアログを確認
3. タブビューの表示確認

**期待結果:**
- [x] 通知権限ダイアログが表示される
- [x] 「許可」選択で権限が有効になる
- [x] ホーム・レシピ・統計タブが表示される
- [x] ホーム画面がデフォルト表示される

#### 1.2 タブナビゲーションテスト
**手順:**
1. ホームタブをタップ
2. レシピタブをタップ
3. 統計タブをタップ

**期待結果:**
- [x] 各タブが正しく切り替わる
- [x] タブアイコンがハイライトされる
- [x] 画面遷移がスムーズ

### 2. ホーム画面テスト

#### 2.1 レイアウト表示テスト
**手順:**
1. ホーム画面を確認

**期待結果:**
- [x] ユーザー情報セクション（レベル3, 150XP）
- [x] 経験値プログレスバー（50%）
- [x] 今日の調理提案セクション
- [x] クイックアクションボタン（3つ）
- [x] 最近の料理履歴セクション

#### 2.2 クイックアクション テスト
**手順:**
1. 「レシピ追加」ボタンをタップ
2. 「タイマー」ボタンをタップ
3. 「レシピ一覧」ボタンをタップ

**期待結果:**
- [x] レシピ追加: AddRecipeFormView が表示される
- [x] タイマー: CookingTimerView が表示される
- [x] レシピ一覧: 機能未実装（今後対応）

### 3. レシピ管理機能テスト

#### 3.1 レシピ一覧表示テスト
**手順:**
1. レシピタブを選択
2. 一覧表示を確認

**期待結果:**
- [x] サンプルレシピが4件表示される
- [x] 各レシピに画像プレースホルダー
- [x] タイトル・調理時間・難易度・カテゴリが表示
- [x] 右矢印アイコンが表示

#### 3.2 検索機能テスト
**手順:**
1. 検索バーに「オムライス」を入力
2. 検索バーに「卵」を入力
3. 存在しない文字列を入力

**期待結果:**
- [x] タイトル検索: 「簡単オムライス」が表示
- [x] 材料検索: 該当レシピが表示
- [x] 該当なし: 空状態画面が表示

#### 3.3 カテゴリフィルタテスト
**手順:**
1. 「食事」カテゴリを選択
2. 「デザート」カテゴリを選択
3. 「全て」カテゴリを選択

**期待結果:**
- [x] 食事: 3件表示（オムライス・味噌汁・カレー）
- [x] デザート: 1件表示（フルーツサラダ）
- [x] 全て: 4件表示

#### 3.4 レシピ詳細表示テスト
**手順:**
1. 任意のレシピをタップ
2. 詳細画面を確認

**期待結果:**
- [x] レシピタイトルが表示
- [x] 調理時間・難易度が表示
- [x] 材料セクションが表示
- [x] 作り方セクションが表示
- [x] 「調理開始」ボタンが表示

#### 3.5 レシピ追加テスト
**手順:**
1. 「+」ボタンをタップ
2. フォーム入力画面を確認
3. 必須項目を入力して保存

**期待結果:**
- [x] AddRecipeFormView が表示される
- [x] URL/手動入力切り替えができる
- [x] フォーム項目が適切に表示
- [x] 保存後にレシピ一覧に追加される

### 4. 調理タイマー機能テスト

#### 4.1 タイマー画面表示テスト
**手順:**
1. ホーム画面からタイマーを起動
2. UI要素を確認

**期待結果:**
- [x] 大きなタイマー表示（00:00）
- [x] クイック時間設定ボタン（7個）
- [x] 「カスタム時間設定」ボタン
- [x] 再生ボタン（無効状態）

#### 4.2 クイック時間設定テスト
**手順:**
1. 「10分」ボタンをタップ
2. 「30分」ボタンをタップ
3. 他の時間ボタンをテスト

**期待結果:**
- [x] タイマー表示が「10:00」に変更
- [x] プログレスサークルが表示
- [x] 再生ボタンが有効化
- [x] クイック設定ボタンが非表示

#### 4.3 カスタム時間設定テスト
**手順:**
1. 「カスタム時間設定」をタップ
2. ピッカーで任意の時間を選択
3. 「設定」ボタンをタップ

**期待結果:**
- [x] 時間選択ピッカーが表示（1-120分）
- [x] 選択した時間がタイマーに反映
- [x] モーダルが閉じる

#### 4.4 タイマー動作テスト
**手順:**
1. 10分タイマーを設定
2. 再生ボタンをタップ
3. タイマー動作を確認

**期待結果:**
- [x] タイマーがカウントダウン開始
- [x] プログレスサークルが動作
- [x] 「X% 完了」表示が更新
- [x] 再生ボタンが一時停止ボタンに変化

#### 4.5 一時停止・再開テスト
**手順:**
1. タイマー実行中に一時停止ボタンをタップ
2. 再開ボタンをタップ

**期待結果:**
- [x] タイマーが一時停止
- [x] 「一時停止中」表示
- [x] 再開ボタンで動作再開
- [x] プログレス状態が保持される

#### 4.6 リセット機能テスト
**手順:**
1. タイマー実行中にリセットボタンをタップ

**期待結果:**
- [x] タイマーが初期設定時間に戻る
- [x] プログレスサークルがリセット
- [x] 一時停止状態になる

#### 4.7 バックグラウンド動作テスト
**手順:**
1. タイマーを開始
2. ホームボタンでアプリをバックグラウンドに移行
3. 10秒後にアプリを再開

**期待結果:**
- [x] バックグラウンドでもタイマーが継続
- [x] アプリ復帰時に正確な残り時間を表示
- [x] プログレス状態が正しく更新

#### 4.8 通知機能テスト
**手順:**
1. 1分タイマーを設定・開始
2. アプリをバックグラウンドに移行
3. 1分経過を待つ

**期待結果:**
- [x] 完了時にプッシュ通知が表示
- [x] 通知タイトル: 「調理完了！」
- [x] 通知本文: 「タイマーが終了しました。お疲れ様でした！」
- [x] サウンド・バッジが動作

#### 4.9 完了画面テスト
**手順:**
1. タイマーを最後まで実行
2. 完了画面を確認

**期待結果:**
- [x] 完了画面がモーダル表示
- [x] チェックマークアイコン
- [x] 「調理完了！」メッセージ
- [x] 「調理記録を追加」ボタン
- [x] 「新しいタイマー」ボタン

### 5. エラーケーステスト

#### 5.1 通知権限拒否テスト
**手順:**
1. アプリ初回起動時に通知権限を「許可しない」
2. タイマー機能を使用

**期待結果:**
- [x] アプリは正常動作を継続
- [x] コンソールに権限拒否ログが出力
- [x] 完了時の通知は表示されない

#### 5.2 メモリ不足・パフォーマンステスト
**手順:**
1. 複数のタイマーを短時間で開始・停止
2. 長時間のタイマー（60分）を実行

**期待結果:**
- [x] アプリクラッシュが発生しない
- [x] メモリリークが発生しない
- [x] UIの反応性が維持される

## 🔍 デバッグ・ログ確認

### ログ出力確認
Xcodeコンソールで以下のログを確認：

```
✅ 通知権限が許可されました
✅ タイマー開始: 600.0秒
⏸ タイマー一時停止
▶️ タイマー再開
🎉 タイマー完了！
✅ 通知スケジュール成功
```

### パフォーマンス監視
- **CPU使用率:** タイマー動作中でも5%以下
- **メモリ使用量:** 50MB以下（シミュレーター）
- **バッテリー消費:** バックグラウンド動作での最小化

## 🐛 既知のバグ・制限事項

### 現在の制限
- [ ] ~~長時間のバックグラウンド動作制限（iOS 15分制限）~~
- [ ] 複数タイマー同時実行未対応
- [ ] 調理記録保存機能未実装
- [ ] オフライン状態での動作未テスト

### 修正済み
- [x] ~~iOS 16での通知表示問題~~ → `.banner, .list`オプション追加で解決
- [x] ~~タイマー完了後のUI状態~~ → 完了画面実装で解決

## 📊 テスト結果サマリー

### 自動テスト可能項目
- [ ] Unit Test: CookingTimerクラス
- [ ] UI Test: 基本画面遷移
- [ ] Integration Test: 通知機能

### 手動テスト必須項目
- [x] 実機での通知動作確認
- [x] バックグラウンド・フォアグラウンド切り替え
- [x] 各種エラーケース

---

## 🎯 テスト実行チェックリスト

### 基本機能テスト (Phase 1-3A)
- [x] アプリ起動・タブナビゲーション
- [x] ホーム画面表示・クイックアクション
- [x] レシピ一覧・検索・フィルタリング
- [x] レシピ詳細表示・追加機能
- [x] タイマー基本動作（開始・停止・リセット）
- [x] クイック時間設定・カスタム設定
- [x] バックグラウンド動作・通知機能
- [x] 完了画面表示・UI状態管理

### 次フェーズテスト準備
- [ ] 調理記録機能テスト計画
- [ ] Core Data統合テスト計画
- [ ] ゲーミフィケーション機能テスト計画

**📋 テスト合格基準:** 全ての「期待結果」項目が ✅ であること